# PRYANIKY POST APP

Небольшое SPA-приложение взаимодействующие с сервером.

1. [Описание поведения функций приложения](#link1)
2. [Реализация](#link2)

GithubPages: https://man5on.github.io/pryaniky-test/

## Использовано:

**`TypeScript`** **`Material UI`** **`ReactJS`** **`Redux Toolkit`** **`Axios`** **`React Hook Form`** **`Vite`**

## Приложение должно состоять из:

1. Страница авторизации
2. Таблица с данными полученными с сервера
3. Таблица должна предоставлять CRUD операции

## <a name='link1'>Описание поведения функций приложения:</a>

1. Неавторизованный пользователь, открывая приложения должен получить предложение
   авторизоваться
2. После успешной авторизации пользователь должен увидеть таблицу с данными.
3. После перезагрузки страницы пользователь должен оставаться авторизован
4. Возможность добавить в таблицу новую запись
5. Новая записать в таблице должна появляться сразу
6. Возможность удалить запись
7. Удаленная записать должна сразу исчезнуть из таблицы
8. Возможность изменить запись
9. Изменения должны сразу отображаться в таблице
10. Приложение должно корректно сообщать пользователю об ошибках заполнения форм или
    неудачных запросах к серверу
11. Во время получения и отправки данных на сервер пользователю должны быть показаны
    индикаторы процесса загрузки/отправки (прогресс бары, спиннеры) данных

## Особенности:

### Авторизация:

Данные для авторизации:

```json
"username": "user{N}"
"password": "password"
```

user{N} – где вместо N нужно ввести число, например user1, user2… user33. Данные в таблице для каждого сохраняются индивидуально.

password – одинаков для всех логинов, в случае его отличия сервер вернёт ошибку.

### Аутенфикация запросов:

В заголовках запроса для аутенфикации необходимо передавать токен полученный при авторизации.

```json
    "x-auth": "token"
```

_Например:_

```json
"x-auth": "supersecrettoken_for_user8"
```

Токен не имеет срока действия.

### Запрос для получения массива данных для таблицы (метод - GET):

В случае успешного выполнения запроса в ответе будут данные об ошибке и массив с данными для таблицы. Массив с данными находится в свойстве data.

Свойство id – уникальный id записи

**Запрос требует аутенфикации.**

Вывести необходимо свойства:

```js
'companySigDate',
'companySignatureName',
'documentName',
'documentStatus',
'documentType',
'employeeNumber',
'employeeSigDate',
```

### Запрос для добавления записи (метод - POST):

-   "companySigDate" - строка содержащая дату и время в ISO формате\*
-   "companySignatureName" – произвольная строка
-   "documentName" – произвольная строка
-   "documentStatus" – произвольная строка
-   "documentType" – произвольная строка
-   "employeeNumber" - произвольная строка
-   "employeeSigDate" - строка содержащая дату и время в ISO формате\*
-   "employeeSignatureName" - произвольная строка

В случае успешного выполнения запроса ответ будет содержать созданную запись и иметь HTTP STATUS CODE 200

**Запрос требует аутенфикации.**

### Запрос для удаления записи(метод - POST):

Где id – это id записи, который получен с данными

В случае успешного выполнения запроса в ответе свойство error_code будет иметь значение 0

**Запрос требует аутенфикации.**

### Запрос для изменения записи(метод POST):

Где id – это id записи, который получен с данными

Данные передаются в JSON формате.

Передаваемые данные аналогичны тем, что передаются при создании записи.

В случае успешного выполнения запроса в ответе свойство error_code будет иметь значение 0, а свойство data будет содержать измененный объект.

**Запрос требует аутенфикации.**

## <a name='link2'>Реализация:</a>

Ниже приведены основные пункты по реализации приложения, и комментарии к ним

### Аутентификация:

Аутентификация реализована с использованием **`MUI`** в связке с **`React Hook Form`**. Все поля имеют свойство `required` и `helperText`. Кнопка авторизации изначально `disabled` и становится активной только при валидном заполнении формы. После успешной авторизации токен пользователя записывается в `localStorage`. После обновления страницы авторизация сохраняется.

### Главная страница:

Отображение контента на главной странице требует авторизации. Приложение проверяет пользователя на наличие токена и выводит `Alert` в случае его отсутствия.После авторизации все записи выводятся в порядке убывания от новых к старым. Каждый пост содержит кнопки управления `Edit` и `Delete`. Сверху доступны кнопки `New Post` и `Logout`. При любом изменении (п.5,7,9 в описании поведения функций приложения ) обновленный список показывается сразу же. Реализован `ProcessBar`. В случае прихода ошибки с сервера, она выведется в `Alert` под навигационной панелью.

### Redux Toolkit:

Использован для оптимизации и последующего расширения приложения. `Redux` хранилище даёт сразу несколько преимуществ:

-   Иммутабельный `state` позволяющий отслеживать статус запроса и хранить все переменные в одном месте, избегая `props`(на больших проектах прокидывать данные через десятки компонентов.. ну такое). -`extraRedusers`(и **delete**`reducer`, т.к. при успешном удалении элемента возвращается только код 0) позволяют сократить количество запросов на сервер, обновляя все переменные внутри 1 файла. Данные легко отслеживаются, редактируются и сортируются.
-   Хорошая база для расширения и добавления функционала (достаточно создать ещё один `slice`).

### Axios

Удобный и популярный инструмент для работы с запросами, позволяющий легко привязать токен к каждому из них и не только.

### React Hook Form:

Изначально код кажется несколько нагроможденным(наверняка так и есть, ведь идеальным кодом называется тот, который ещё не написан), но данная библиотека имеет большой функционал для работы с формами и их валидацией, предоставляя всё необходимое из коробки.

## Commands using `Vite`

```json
    "dev": "vite",
    "build": "tsc && vite build",
    "preview": "vite preview"
```
